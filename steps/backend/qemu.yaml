# Qemu backend recipe
---
extend: VM.yaml

checkpoint: qemu.yaml

global:
  image_format: qcow2

  qemu_enable_kvm: true
  qemu_cpus: "$(nproc)"
  qemu_memory_size:   2G
  qemu_monitor_socket: "/tmp/kameleon_qemu_monitor.$${kameleon_recipe_name}.$${kameleon_short_uuid}.socket"
  qemu_checkpoint_timeout: 300
  qemu_arch: $${arch}
  image_disk: $${kameleon_cwd}/base_$${kameleon_recipe_name}
  qemu_image_size: 8G
  qemu_pidfile: $${kameleon_cwd}/qemu.pid
  qemu_kernel_path: $${kameleon_cwd}/qemu_kernel
  qemu_initrd_path: $${kameleon_cwd}/qemu_initrd
  qemu_append_cmdline: ""
  qemu_iso_path: $${kameleon_cwd}/qemu.iso
  disk_device: /dev/vda
  filesystem_type: ext4


bootstrap:
  - "@base"
  - start_qemu

setup:
  - "@base"

export:
  - "@base"
